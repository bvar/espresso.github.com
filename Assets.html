
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Espresso Framework</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <script src="javascripts/jquery.js" type="text/javascript"></script>
  
  <link href="javascripts/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
  <link href="javascripts/bootstrap/css/bootstrap-responsive.min.css" rel="stylesheet" />
  <script src="javascripts/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>

  <link href="javascripts/google-code-prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script src="javascripts/google-code-prettify/prettify.js" type="text/javascript"></script>

  <link href="stylesheets/master.css" type="text/css" rel="stylesheet" />

</head>

<body>

  <div class="container">

    <div class="row">
      <div class="span2">
        <a href="index.html">
          <img src="images/logo.png" class="pull-right logo" /></a>
      </div>

      <div class="span6">
        <h1>
          <a href="index.html">
          Espresso Framework</a>
        </h1>
        <h4>
          Scalable Web Framework aimed at Speed and Simplicity 
        </h4>
      </div>

      <div class="span pull-right">
        <div class="row">
          <div class="span">
            <h4>
              <a href="presentation.html">
                Official Presentation</a>
            </h4>
          </div>
          <div class="span">
            <a href="presentation.html">
              <img src="icons/elementary/64/Apps-background-icon.png" /></a>
          </div>
        </div>
      </div>
    </div>

    <hr/>
    <div class="row" style="text-align: center;">
    <div class="btn-toolbar">
      
      
        <div class="btn-group" style="text-align: left; margin: 5px;">
          <a href="Intro.html" class="btn">
            Intro</a>
            <button class="btn dropdown-toggle" data-toggle="dropdown">
              <span class="caret"></span>
            </button>

            <ul class="dropdown-menu">
            
              <li>
                <a href="Intro.html#actions">
                  Actions</a>
              </li>
            
              <li>
                <a href="Intro.html#controllers">
                  Controllers</a>
              </li>
            
              <li>
                <a href="Intro.html#slices">
                  Slices</a>
              </li>
            
              <li>
                <a href="Intro.html#mvc-">
                  MVC?</a>
              </li>
            
              <li>
                <a href="Intro.html#models-">
                  Models?</a>
              </li>
            
            </ul>

        </div>
      
        <div class="btn-group" style="text-align: left; margin: 5px;">
          <a href="Routing.html" class="btn">
            Routing</a>
            <button class="btn dropdown-toggle" data-toggle="dropdown">
              <span class="caret"></span>
            </button>

            <ul class="dropdown-menu">
            
              <li>
                <a href="Routing.html#base-url">
                  Base URL</a>
              </li>
            
              <li>
                <a href="Routing.html#canonicals">
                  Canonicals</a>
              </li>
            
              <li>
                <a href="Routing.html#actions">
                  Actions</a>
              </li>
            
              <li>
                <a href="Routing.html#actions-mapping">
                  Actions Mapping</a>
              </li>
            
              <li>
                <a href="Routing.html#parametrization">
                  Parametrization</a>
              </li>
            
              <li>
                <a href="Routing.html#format">
                  Format</a>
              </li>
            
              <li>
                <a href="Routing.html#restful-actions">
                  RESTful Actions</a>
              </li>
            
              <li>
                <a href="Routing.html#aliases">
                  Aliases</a>
              </li>
            
              <li>
                <a href="Routing.html#rewriter">
                  Rewriter</a>
              </li>
            
            </ul>

        </div>
      
        <div class="btn-group" style="text-align: left; margin: 5px;">
          <a href="Setup.html" class="btn">
            Setup</a>
            <button class="btn dropdown-toggle" data-toggle="dropdown">
              <span class="caret"></span>
            </button>

            <ul class="dropdown-menu">
            
              <li>
                <a href="Setup.html#global-setup">
                  Global Setup</a>
              </li>
            
              <li>
                <a href="Setup.html#setup-by-name">
                  Setup by Name</a>
              </li>
            
              <li>
                <a href="Setup.html#setup-by-format">
                  Setup by Format</a>
              </li>
            
              <li>
                <a href="Setup.html#remote-setup">
                  Remote Setup</a>
              </li>
            
            </ul>

        </div>
      
        <div class="btn-group" style="text-align: left; margin: 5px;">
          <a href="Workflow.html" class="btn">
            Workflow</a>
            <button class="btn dropdown-toggle" data-toggle="dropdown">
              <span class="caret"></span>
            </button>

            <ul class="dropdown-menu">
            
              <li>
                <a href="Workflow.html#route">
                  Route</a>
              </li>
            
              <li>
                <a href="Workflow.html#params">
                  Params</a>
              </li>
            
              <li>
                <a href="Workflow.html#passing-control">
                  Passing Control</a>
              </li>
            
              <li>
                <a href="Workflow.html#fetching-body">
                  Fetching Body</a>
              </li>
            
              <li>
                <a href="Workflow.html#halt">
                  Halt</a>
              </li>
            
              <li>
                <a href="Workflow.html#redirect">
                  Redirect</a>
              </li>
            
              <li>
                <a href="Workflow.html#reload">
                  Reload</a>
              </li>
            
              <li>
                <a href="Workflow.html#error-handlers">
                  Error Handlers</a>
              </li>
            
              <li>
                <a href="Workflow.html#hooks">
                  Hooks</a>
              </li>
            
              <li>
                <a href="Workflow.html#authorization">
                  Authorization</a>
              </li>
            
              <li>
                <a href="Workflow.html#sessions">
                  Sessions</a>
              </li>
            
              <li>
                <a href="Workflow.html#flash">
                  Flash</a>
              </li>
            
              <li>
                <a href="Workflow.html#cookies">
                  Cookies</a>
              </li>
            
              <li>
                <a href="Workflow.html#content-type">
                  Content Type</a>
              </li>
            
              <li>
                <a href="Workflow.html#charset">
                  Charset</a>
              </li>
            
              <li>
                <a href="Workflow.html#cache-control">
                  Cache Control</a>
              </li>
            
              <li>
                <a href="Workflow.html#expires">
                  Expires</a>
              </li>
            
              <li>
                <a href="Workflow.html#last-modified">
                  Last Modified</a>
              </li>
            
              <li>
                <a href="Workflow.html#accepted-content-type">
                  Accepted Content Type</a>
              </li>
            
              <li>
                <a href="Workflow.html#cache-manager">
                  Cache Manager</a>
              </li>
            
              <li>
                <a href="Workflow.html#send-file">
                  Send File</a>
              </li>
            
              <li>
                <a href="Workflow.html#send-files">
                  Send Files</a>
              </li>
            
              <li>
                <a href="Workflow.html#attachment">
                  Attachment</a>
              </li>
            
              <li>
                <a href="Workflow.html#headers">
                  Headers</a>
              </li>
            
            </ul>

        </div>
      
        <div class="btn-group" style="text-align: left; margin: 5px;">
          <a href="ViewAPI.html" class="btn">
            View API</a>
            <button class="btn dropdown-toggle" data-toggle="dropdown">
              <span class="caret"></span>
            </button>

            <ul class="dropdown-menu">
            
              <li>
                <a href="ViewAPI.html#engine">
                  Engine</a>
              </li>
            
              <li>
                <a href="ViewAPI.html#extension">
                  Extension</a>
              </li>
            
              <li>
                <a href="ViewAPI.html#templates-path">
                  Templates Path</a>
              </li>
            
              <li>
                <a href="ViewAPI.html#layouts-path">
                  Layouts Path</a>
              </li>
            
              <li>
                <a href="ViewAPI.html#layout">
                  Layout</a>
              </li>
            
              <li>
                <a href="ViewAPI.html#rendering-templates">
                  Rendering Templates</a>
              </li>
            
              <li>
                <a href="ViewAPI.html#rendering-layouts">
                  Rendering Layouts</a>
              </li>
            
              <li>
                <a href="ViewAPI.html#ad-hoc-rendering">
                  Ad hoc Rendering</a>
              </li>
            
              <li>
                <a href="ViewAPI.html#path-resolver">
                  Path Resolver</a>
              </li>
            
              <li>
                <a href="ViewAPI.html#templates-compilation">
                  Templates Compilation</a>
              </li>
            
            </ul>

        </div>
      
        <div class="btn-group" style="text-align: left; margin: 5px;">
          <a href="Streaming.html" class="btn">
            Streaming</a>
            <button class="btn dropdown-toggle" data-toggle="dropdown">
              <span class="caret"></span>
            </button>

            <ul class="dropdown-menu">
            
              <li>
                <a href="Streaming.html#server-sent-events">
                  Server-Sent Events</a>
              </li>
            
              <li>
                <a href="Streaming.html#websockets">
                  WebSockets</a>
              </li>
            
              <li>
                <a href="Streaming.html#chunked-responses">
                  Chunked Responses</a>
              </li>
            
            </ul>

        </div>
      
        <div class="btn-group" style="text-align: left; margin: 5px;">
          <a href="Assets.html" class="btn">
            Assets</a>
            <button class="btn dropdown-toggle" data-toggle="dropdown">
              <span class="caret"></span>
            </button>

            <ul class="dropdown-menu">
            
              <li>
                <a href="Assets.html#intro">
                  Intro</a>
              </li>
            
              <li>
                <a href="Assets.html#mapper">
                  Mapper</a>
              </li>
            
              <li>
                <a href="Assets.html#server">
                  Server</a>
              </li>
            
              <li>
                <a href="Assets.html#helpers">
                  Helpers</a>
              </li>
            
              <li>
                <a href="Assets.html#loader">
                  Loader</a>
              </li>
            
            </ul>

        </div>
      
        <div class="btn-group" style="text-align: left; margin: 5px;">
          <a href="CRUD.html" class="btn">
            CRUD</a>
            <button class="btn dropdown-toggle" data-toggle="dropdown">
              <span class="caret"></span>
            </button>

            <ul class="dropdown-menu">
            
              <li>
                <a href="CRUD.html#intro">
                  Intro</a>
              </li>
            
              <li>
                <a href="CRUD.html#resource">
                  Resource</a>
              </li>
            
              <li>
                <a href="CRUD.html#excluded-params">
                  Excluded Params</a>
              </li>
            
              <li>
                <a href="CRUD.html#root">
                  Root</a>
              </li>
            
              <li>
                <a href="CRUD.html#response">
                  Response</a>
              </li>
            
              <li>
                <a href="CRUD.html#error-handler">
                  Error Handler</a>
              </li>
            
              <li>
                <a href="CRUD.html#access-restriction">
                  Access Restriction</a>
              </li>
            
            </ul>

        </div>
      
        <div class="btn-group" style="text-align: left; margin: 5px;">
          <a href="Deploy.html" class="btn">
            Deploy</a>
            <button class="btn dropdown-toggle" data-toggle="dropdown">
              <span class="caret"></span>
            </button>

            <ul class="dropdown-menu">
            
              <li>
                <a href="Deploy.html#controllers">
                  Controllers</a>
              </li>
            
              <li>
                <a href="Deploy.html#slices">
                  Slices</a>
              </li>
            
              <li>
                <a href="Deploy.html#roots">
                  Roots</a>
              </li>
            
              <li>
                <a href="Deploy.html#run">
                  Run</a>
              </li>
            
              <li>
                <a href="Deploy.html#config-ru">
                  config.ru</a>
              </li>
            
            </ul>

        </div>
      
      
    </div>
    </div>
    <hr/>
    <h2 id='intro'><a href='#intro'>Intro</a></h2>

<p>Espresso allows you to load and serve assets with easy.</p>

<p>To load a script you simply do:</p>

<pre>
script_tag 'script.js'
</pre>


<p>or via assets loader:</p>

<pre>
js 'script'
</pre>


<p>Same for stylesheets and images:</p>

<pre>
style_tag 'style.css'

img_tag 'image.png'
</pre>


<p>or via assets loader:</p>

<pre>
css 'style'

png 'image'
</pre>


<p>By default assets will be loaded from current folder, that's it, <code>src</code>/<code>href</code>
will look like <code>src="script.js"</code> / <code>href="style.css"</code></p>

<p>To have them mapped to some URL, use assets mapper.</p>

<p><strong>[ <a href="#">contents &uarr;</a> ]</strong></p>

<h2 id='mapper'><a href='#mapper'>Mapper</a></h2>

<p><code>assets_map</code> is a method of dual meaning:</p>

<ul>
<li>it defines a baseurl for assets loader</li>
<li>and it may instruct your app to act as an assets server</li>
</ul>


<p>As said above, by default assets will be loaded from current folder.</p>

<p>To define a baseurl to load assets from, use <code>assets_map</code>(or <code>assets_url</code> alias) at app level:</p>

<pre>
class App &lt; E
  map '/'
  ...
end

app = EApp.new do
  
  mount App

  assets_map :assets
end

app.run
</pre>


<p>Now your assets will load from '/assets' baseurl.</p>

<p>Example:</p>

<pre>
script_tag 'script.js'
# or
js 'script'
</pre>


<p>both will return <code>&lt;script src="/assets/script.js" ...</code></p>

<p>Same for stylesheets and images:</p>

<pre>
style_tag 'style.css'
# or
css 'style'
</pre>


<p>both will return <code>&lt;link href="/assets/style.css" ...</code></p>

<pre>
img_tag 'image.png'
# or
png 'image'
</pre>


<p>both will return <code>&lt;img src="/assets/image.png" ...</code></p>

<p><strong>[ <a href="#">contents &uarr;</a> ]</strong></p>

<h2 id='server'><a href='#server'>Server</a></h2>

<p>The second meaning of assets mapper is to instruct your app to act as an assets server, that's it, your app will serve static files.</p>

<p>For this to work simply set second argument of <code>assets_map</code> to any positive value:</p>

<pre>
app = EApp.new do
  ...

  assets_map :assets, :assets_server
end
</pre>


<p>Now your app will serve files found under <code>public/</code> folder inside app root.</p>

<p>So <code>&lt;script src="/assets/script.js" ...</code> will serve <code>public/script.js</code></p>

<p>If your files are located under another folder inside app root,
use <code>assets_path</code> to inform assets server about custom location:</p>

<pre>
app = EApp.new do
  ...

  assets_map :assets, :assets_server

  assets_path :static
end
</pre>


<p>Now your app will serve files found under <code>static/</code> folder inside app root.</p>

<p>So <code>&lt;script src="/assets/script.js" ...</code> will serve <code>static/script.js</code></p>

<p>If your files are located out of app root, use <code>assets_fullpath</code>:</p>

<pre>
app = EApp.new do
  ...

  assets_map :assets, :assets_server

  assets_fullpath '/full/path/to/Shared-assets'
end
</pre>


<p>Now your app will serve files found under <code>/full/path/to/Shared-assets/</code> folder.</p>

<p>So <code>&lt;script src="/assets/script.js" ...</code> will serve <code>/full/path/to/Shared-assets/script.js</code></p>

<p><strong>[ <a href="#">contents &uarr;</a> ]</strong></p>

<h2 id='helpers'><a href='#helpers'>Helpers</a></h2>

<p>For now, Espresso offers 3 helper methods:</p>

<ul>
<li><code>script_tag</code></li>
<li><code>style_tag</code></li>
<li><code>img_tag</code></li>
</ul>


<p>All accepts from 1 to 2 arguments.</p>

<p>Usually first argument is the file to be loaded and the second the options to be added to the tag:</p>

<pre>
script_tag 'some-file.js', :async => true, :charset => 'UTF-8'
#=&gt; &lt;script src="some-file.js" async="true" charset="UTF-8" ...
</pre>


<p>You can also omit the first argument and pass file via <code>:src</code> option.</p>

<p>This is useful when you need to skip assets mapper setup and load file directly.</p>

<p>Let's suppose assets mapper is set to load files from <code>/assets</code> baseurl
but we need to load a script from our CDN:</p>

<pre>
script_tag :src => 'http://some.cdn/script.js'
#=&gt; &lt;script src="http://some.cdn/script.js" ...

# without :src option

script_tag 'script.js'
#=&gt; &lt;script src="/assets/script.js" ...
</pre>


<p>Same for rooted URLs inside your app.</p>

<p>Let's suppose baseurl is set to <code>/vendor</code> but we need to load a stylesheet from root:</p>

<pre>
style_tag :src => '/themes/black.css'
#=&gt; &lt;link href="/themes/black.css" ...

# without :src option

style_tag 'bootstrap/bootstrap.css'
#=&gt; &lt;link href="/vendor/bootstrap/bootstrap.css" ...
</pre>


<p>Same when you need to load a file from current folder.</p>

<p>Let's suppose baseurl is set to <code>/static</code> but we need to load a image from current folder:</p>

<pre>
img_tag :src => 'banner.png'
#=&gt; &lt;img src="banner.png" ...

# without :src option

img_tag 'banner.png'
#=&gt; &lt;img src="/static/banner.png" ...
</pre>


<p><strong>[ <a href="#">contents &uarr;</a> ]</strong></p>

<h2 id='loader'><a href='#loader'>Loader</a></h2>

<p>Assets loader allow to save time and space
by avoiding repetitive and redundant path typing.</p>

<p>It is like a mapper for a local set of assets.</p>

<p>Let's suppose we need to load N files from <code>/assets/vendor</code>
and another M files from <code>/assets/app</code></p>

<p>Then we set baseurl to <code>/assets</code> via <code>assets_map</code> and loading files from <code>vendor/</code> and <code>app/</code>:</p>

<pre>
app = EApp.new
  ...

  assets_map :assets
end

# in templates:

script_tag 'vendor/jquery.js'
script_tag 'vendor/bootstrap/js/bootstrap.js'
style_tag  'vendor/bootstrap/css/bootstrap.css'

script_tag 'vendor/html5-boilerplate/js/main.js'
style_tag  'vendor/html5-boilerplate/css/main.css'

script_tag 'app/js/boot.js'
script_tag 'app/js/setup.js'
script_tag 'app/js/app.js'
style_tag  'app/css/theme.css'
</pre>


<p>This will work well, but it is cumbersome.</p>

<p>Assets loader will let us do the same with much less code:</p>

<pre>
asl = assets_loader :vendor

asl.js 'jquery'

asl.cd  :bootstrap
asl.js  'js/bootstrap'
asl.css 'css/bootstrap'

asl.cd  '../html5-boilerplate'
asl.js  'js/main'
asl.css 'css/main'


asl = assets_loader :app

asl.cd 'js'
asl.js 'boot'
asl.js 'setup'
asl.js 'app'

asl.cd  '../css'
asl.css 'theme'
</pre>


<p>Or even shorter with blocks:</p>

<pre>
assets_loader :vendor do

  js 'jquery'

  cd  :bootstrap
  js  'js/bootstrap'
  css 'css/bootstrap'

  cd  '../html5-boilerplate'
  js  'js/main'
  css 'css/main'
end

assets_loader :app do

  cd 'js'
  js 'boot'
  js 'setup'
  js 'app'

  cd  '../css'
  css 'theme'
end
</pre>


<p>You can also pass multiple files as arguments:</p>

<pre>
assets_loader :app do

  cd 'js'
  js :boot, :setup, :app
end
#=&gt; &lt;script src="/app/js/boot.js" ...
#=&gt; &lt;script src="/app/js/setup.js" ...
#=&gt; &lt;script src="/app/js/app.js" ...
</pre>


<p>Blocks will automatically return a string containing generated tags.</p>

<p>Each tag ending in <code>\n</code> character.</p>

<p>If you need tags returned as an array, without <code>\n</code> character at the end, send <code>to_a</code> to the block:</p>

<pre>
tags = assets_loader :app do

  cd 'js'

  js :boot, :setup, :app
end.to_a

# joining and displaying tags

tags.join("\n  \n")
</pre>


<p><strong>Worth to note</strong> that assets loader can skip assets mapper setup,
that's it, you can load assets from any location.</p>

<p>This will basically work for locations starting with:</p>

<ul>
<li>a protocol: <code>http://</code> <code>https://</code>  etc.</li>
<li>a slash: <code>/</code></li>
<li>a dot slash notation: <code>./</code> meant to load assets from current folder</li>
</ul>


<p><strong>Example:</strong> load assets from <code>http://my.cdn</code>, regardless assets mapper setup:</p>

<pre>
assets_loader 'http://my.cdn' do

  js 'jquery'

  cd  :bootstrap
  js  'js/bootstrap'
  css 'css/bootstrap'

  cd  '../html5-boilerplate'
  js  'js/main'
  css 'css/main'
end
</pre>


<p><strong>Example:</strong> load assets from current folder, regardless assets mapper setup:</p>

<pre>
assets_loader './app' do

  cd 'js'
  js 'boot'
  js 'setup'
  js 'app'

  cd  '../css'
  css 'theme'
end
</pre>


<p><strong>And that's not all.</strong></p>

<p>You can skip both assets mapper and assets loader setup if you need.</p>

<p>For this simply pass <code>:src</code> option to any of <code>js</code>, <code>css</code>, <code>img</code> methods.</p>

<pre>
app = EApp.new do
  ...

  assets_map '/assets'
end

# in templates:

assets_loader '/vendor' do

  js 'jquery'
  #=&gt; &lt;script src="/assets/vendor/jquery.js" ...

  js :src => '/master'
  #=&gt; &lt;script src="/master.js" ...
end
</pre>


<p><strong>[ <a href="#">contents &uarr;</a> ]</strong></p>

    <hr/>

    <footer class="footer well">

      <div class="row">
        <div class="span4">
          <p>
            License: MIT
          </p>
          <p>
            Author: Silviu Rusu
          </p>
          <p>
            Source Code:
            <a href="https://github.com/espresso/espresso">
                https://github.com/espresso/espresso</a>
          </p>
        </div>
      
      
        <div class="span6 pull-right">
          <p>
            Issues/Bugs:
            <a href="https://github.com/espresso/espresso/issues">
                https://github.com/espresso/espresso/issues</a>
            </p>
            <p>
              <strong>Contributors are very Welcome!</strong>
            </p>
            <p>
              IRC channel: #espressorb on irc.freenode.net
            </p>
        </div>
      </div>
      
    </footer>

  </div>
  
  <a href="https://github.com/espresso/espresso"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png" alt="Fork me on GitHub"></a>

  <script type="text/javascript">
    $(function() {
        $('pre').addClass('prettyprint lang-ruby');
        prettyPrint();
    });
  </script>
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-27879048-5']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  </body>
</html>
